class BRHeader{constructor(e,t){this.name=e,this.component=t,this.flex_container=t.querySelector(".flex-container"),this.login=t.querySelector(".login"),this.login_btn=t.querySelector(".login button"),this.avatar=t.querySelector(".avatar"),this.links_btn=t.querySelector(".links button"),this.functions_btn=t.querySelector(".functions button"),this.menu=t.querySelector(".menu"),this.search=t.querySelector(".search"),this.search_btn=t.querySelector(".search-btn button"),this.search_input=t.querySelector(".search input"),this.search_close=t.querySelector(".search .search-close"),this.sticky=t.hasAttribute("sticky"),this._setBehavior()}_setBehavior(){if(this.avatar.setAttribute("hidden",""),this.sticky){const e=this.component.hasAttribute("compact"),t=this.component.hasAttribute("no-subtitle");window.onscroll=()=>{window.pageYOffset>this.component.offsetTop?(this.component.classList.add("sticky"),e||this.component.setAttribute("compact",""),t||this.component.setAttribute("no-subtitle","")):(this.component.classList.remove("sticky"),e||this.component.removeAttribute("compact",""),t||this.component.removeAttribute("no-subtitle"))}}this.login_btn&&this.login_btn.addEventListener("click",()=>{this.avatar.toggleAttribute("hidden"),this.login.toggleAttribute("hidden")}),this.links_btn&&this.links_btn.addEventListener("click",e=>{this._openPop(e)}),this.functions_btn&&this.functions_btn.addEventListener("click",e=>{this._openPop(e)}),this.search_btn&&this.search_btn.addEventListener("click",e=>{this._openPop(e)}),this.search_input&&this.search_input.addEventListener("focus",e=>{this.search.setAttribute("active",""),this.menu.style.display="none"}),this.search_close&&this.search_close.addEventListener("click",e=>{this.search.removeAttribute("active"),this.menu.style.display="flex"})}_openPop(){let e=event.target.parentNode;for(;"DIV"!=e.tagName;)e=e.parentNode;e.querySelector(":scope > button").setAttribute("active","");const t=e.querySelector("ul");let i,s=this.component.querySelector(".popmenu");if(s){i=s.parentNode;const e=i.querySelector(":scope > button");e&&e.removeAttribute("active"),s.removeAttribute("active"),i.removeAttribute("active"),s.parentNode.removeChild(s)}if(t)i!==t.parentNode&&(this.search_btn.removeAttribute("active"),s=document.createElement("div"),s.innerHTML=t.outerHTML,s.classList.add("popmenu"),t.parentNode.appendChild(s));else{s=document.createElement("div"),s.classList.add("popmenu"),s.innerHTML=this.search.outerHTML;const e=s.querySelector(".search-close"),t=s.querySelector(".search");this.component.hasAttribute("compact")?t.style.height=this.flex_container.offsetHeight+"px":s.style.height=this.flex_container.offsetHeight+"px",this.flex_container.prepend(s),e.addEventListener("click",()=>{s.removeAttribute("active"),s.parentNode&&s.parentNode.removeAttribute("active"),this.search_btn.removeAttribute("active"),this.menu.style.display="flex",this._closePop()}),setTimeout(()=>t.querySelector("input").focus(),500)}const o=!!s.style.display;s.setAttribute("active",""),s.parentNode&&s.parentNode.setAttribute("active",""),s.style.display=o?"none"===s.style.display?"flex":"none":"flex"}_closePop(){const e=this.component.querySelector(".popmenu");e.parentNode.removeChild(e)}}const headerList=[];for(const e of window.document.querySelectorAll(".br-header"))headerList.push(new BRHeader("br-header",e));export default BRHeader;
//# sourceMappingURL=header.js.map