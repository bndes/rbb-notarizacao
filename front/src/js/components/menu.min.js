class BRMenu{constructor(e,t){this.name=e,this.component=t,this.folders=this.component.querySelectorAll(".folder"),this.main=this.folders.length>=2,this._setBehavior()}_setBehavior(){if(this._closeAllSubmenus(),this._setHref(),this.main)this.folders.forEach((e,t,l)=>{const i=e.querySelector(".header"),r=e.querySelector("ul");l.length===++t&&r.removeAttribute("hidden"),i.addEventListener("click",e=>{this._toggleCollapse(e,i)})});else{this.component.querySelector(".folder > ul").removeAttribute("hidden")}this.folders.forEach(e=>{e.querySelectorAll(".item").forEach(t=>{if(!t.hasAttribute("disabled")){const l=t.parentNode.querySelector("ul");l?t.addEventListener("click",i=>{t.hasAttribute("disabled")||this._itemClick(e,t,l)}):t.addEventListener("click",e=>{t.hasAttribute("disabled")||this._linkClick(t)})}})}),this._showLinked()}_showLinked(){const e=this.component.querySelector(".item[linked]");if(e){const t=[];let l=e;for(;!l.classList.contains("folder");)l=l.parentNode,(this.main?"LI"==l.tagName||"DIV"==l.tagName:"LI"==l.tagName)&&t.unshift(l.querySelector("a"));t.forEach(e=>{const t=e.parentNode.querySelector("ul");t?t.hasAttribute("hidden")&&e.click():e.click()})}}_setHref(){this.component.querySelectorAll(".folder a").forEach(e=>{(e.hasAttribute("href")?e.getAttribute("href"):"").trim().length<1&&e.setAttribute("href","javascript:void(0);")})}_toggleCollapse(e,t){this.folders.forEach(e=>{const l=e.querySelector("ul"),i=e.querySelector(".header"),r=e.querySelector(".header .fa-angle-down")?e.querySelector(".header .fa-angle-down"):e.querySelector(".header .fa-angle-up");i.removeAttribute("hidden"),t==i?(l.toggleAttribute("hidden"),r.classList.toggle("fa-angle-down"),r.classList.toggle("fa-angle-up"),l.hasAttribute("hidden")||this._showOnlyLastActive(e)):(l.setAttribute("hidden",""),r.classList.add("fa-angle-down"),r.classList.remove("fa-angle-up"))})}_linkClick(e){this.component.querySelectorAll("[linked]").forEach(e=>{e.removeAttribute("linked")}),e.setAttribute("linked","")}_itemClick(e,t,l){l.toggleAttribute("hidden"),t.toggleAttribute("active"),t.hasAttribute("active")?this._linkClick(t):t.removeAttribute("linked");const i=t.querySelector(".fa-angle-right")?t.querySelector(".fa-angle-right"):t.querySelector(".fa-angle-left");i.classList.toggle("fa-angle-left"),i.classList.toggle("fa-angle-right"),this._showOnlyLastActive(e),this._toggleSiblingsItens(t)}_closeAllSubmenus(){this.component.querySelectorAll("ul").forEach(e=>{e.setAttribute("hidden","")})}_toggleAllHeaders(e){this.component.querySelectorAll(".header").forEach(t=>{e?t.setAttribute("hidden",""):t.removeAttribute("hidden")})}_toggleSiblingsItens(e){e.parentNode.parentNode.querySelectorAll(":scope > li").forEach(e=>{e.toggleAttribute("hidden")}),e.parentNode.toggleAttribute("hidden")}_showOnlyLastActive(e){const t=e.querySelectorAll(".item[active]"),l=e.querySelector(".header"),i=t.length>0;this._toggleAllHeaders(!0),i?(l&&l.removeAttribute("hidden"),t.forEach((e,t,l)=>{l.length===++t?e.removeAttribute("hidden"):e.setAttribute("hidden","")})):this._toggleAllHeaders(!1)}}const menuList=[];for(const e of window.document.querySelectorAll(".br-menu"))menuList.push(new BRMenu("br-menu",e));function itemMenuClick(){this.setAttribute("linked","")}export default BRMenu;
//# sourceMappingURL=menu.js.map